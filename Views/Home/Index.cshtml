@{ 
    ViewData["Title"] = "Home Page"; 
    IEnumerable<Skill> Skills = ViewData["Skill"] as IEnumerable<Skill>; 
   IEnumerable<Project> ProjectList = ViewData["ProjectList"] as IEnumerable<Project>; 
   IEnumerable<TypeProject> TypeProjects = ViewData["TypeProject"] as IEnumerable<TypeProject>; 
}

<style>
    body {
        background-color: #eeeeee;
    }

    .Search {
        -webkit-box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.2);
        padding: 5rem;
        padding-top: 1rem;
        display: none;
        background-color: white;
    }

    .connn {
        border: 1px solid red;
        border-color: #ccc;
        -webkit-box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.2);
        background-color: white;
        color: #ccc;
        font-size: 18px;
    }

    .tableSearch {
        border: 1px solid red;
        border-color: #ccc;
        -webkit-box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.2);
        padding: 5rem;
        background-color: white;
    }

    thCenter {
        text-align: center;
    }

    .center-td {
        text-align: center;
    }

    tr {
        height: 10rem;
    }

    /*btn*/

    .select2-container {
        width: 100% !important;
    }

    #searchToggle {
        margin-top: 2rem;
        margin-bottom: 0.5rem;
        width: 100%;
        height: 30px;
    }

    #myCarousel {
        width: 100%;
    }

    .body-content {
        padding: 0%;
        width: 100%;
    }

    #tableContainer {
        align-items: center;
        margin: 0%;
        padding-right: 10%;
        padding-left: 10%;
        margin-right: auto;
        margin-left: auto;
    }
    .formSearch{
        box-shadow: 0 0 4px 0 rgba(0,0,0,.08), 0 2px 4px 0 rgba(0,0,0,.12);
        border-radius: 3px;
        background: #fff;
        position: relative;
        width: 80%;
        margin: auto;
        margin-top: 3rem;
    }
    /* .formSearch-header{
        border-bottom: 1px solid #BEC0C2;
    } */
    .projectComtroller{
        border-bottom: 0.5px solid rgba(190, 192, 194, 0.589);
    }
    .projectComtroller:hover{
        padding: 15px;
        background-color: #fafafa;
        border-left: 6px solid #ff5a8b;
        margin-bottom: 10px;
        -webkit-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
        -moz-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
                box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
    }
    .projectAPI{
        border-bottom: 0.5px solid rgba(190, 192, 194, 0.589);
    }
</style>

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img src="~/images/bannerV2.2.jpg" alt="ASP.NET" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    Learn how to build ASP.NET apps that can run anywhere.
                    <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525028&clcid=0x409">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/images/bannerV2.4.jpg" alt="Visual Studio" class="img-responsive" />
            <div class="carousel-caption" role="option">
                 <p>
                    There are powerful new features in Visual Studio for building modern web apps.
                    <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525030&clcid=0x409">
                        Learn More
                    </a>
                </p> 
            </div>
        </div>
        <div class="item">
            <img src="~/images/bannerV2.3.jpg" alt="Package Management" class="img-responsive" />
            <div class="carousel-caption" role="option">
                 <p>
                    Bring in libraries from NuGet and npm, and automate tasks using Grunt or Gulp.
                    <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525029&clcid=0x409">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<!-- <div class="row" id="tableContainer">
    <div class="row" style="margin-top: 3rem;">
        <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-4 ">
                                <div class="connn text-center" style="height: 5rem;padding: 10px;border: 20px;width: 20rem; margin-left: 25%;">@ViewData["ProjectLengths"] ประกาศ</div>
                            </div>
                             <div class=" col-sm-4 text-center">
                                <div class=" connn text-center" style="height: 5rem;padding: 10px;border: 20px;width: 20rem; margin-left: 25%;">ฟรีแลนซ์ @ViewData["FreelanceLengths"] คน</div>
                            </div>
                            <div class=" col-sm-4 text-center">
                                <div class="connn text-center" style="height: 5rem;padding: 10px;border: 20px;width: 20rem; margin-left: 25%;">ผู้จ้าง @ViewData["EmployerLengths"] คน</div>
                            </div>
                        </div>
                    </div> 
    </div>
    <div class="row" style="margin-bottom: 1rem;">
        <div class="col-sm-12" style="margin-bottom: 1rem;">
            <div class="input-group">
                <input style="width: 40%;" type="text" id="searchString" class="form-control pull-right" placeholder="Search for...">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" id="buttonSearch">
                        <i class="fas fa-search"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <select class="form-control pull-right" id="seTypeProject" style="width: 40%;margin-right: 2rem;">
                    <option value=null>เลือกประเภทงาน</option>
                    @foreach (TypeProject TypeProjectList in TypeProjects) 
                    {
                        <option value=@TypeProjectList.TypeProject_ID>@TypeProjectList.Name</option>
                    }
                </select>
            </div>
        </div>
    </div>
    <table style="width:100%;" id="tableSearch" class="tableSearch">
        <thead>
            <tr style="height: 5rem; background-color: #4e4d4d; color:  white;">
                <th class="col-xs-5">ชื่อ/รายละอียด</th>
                <th class="col-xs-2 text-center">ระยะเวลา</th>
                <th class="col-xs-3 text-center">ประมูลถึง</th>
                <th class="col-xs-2 text-center">ราคา</th>
            </tr>
        </thead>
        <tbody class="points_table_scrollbar">
            @foreach (@Project @ProjectLists in @ProjectList) {
            <tr class="projectComtroller">
                <td class="col-xs-5">
                    <div class="row">
                        <div class="col-sm-12 projectName">
                            <a href=/Outsider/ProjectDetails/@ProjectLists.Project_ID>
                                <h4>@ProjectLists.ProjectName</h4>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12"> @ProjectLists.Description</div>
                    </div>
                </td>
                <td class="col-xs-2">
                    <div class="row">
                        <div class="col-sm-12 text-center Timelength">@ProjectLists.Timelength วัน</div>
                    </div>
                </td>
                <td class="col-xs-2">
                    <div class="row">
                        <div class="col-sm-12 text-center EndDate">@Html.DisplayFor(modelItem => @ProjectLists.EndDate)</div>
                    </div>
                </td>
                <td class="col-xs-2">
                    <div class="row">
                        <div class="col-sm-12 text-center Budget"><i class="fal fa-calendar-alt"></i>@ProjectLists.Budget บาท</div>
                    </div>

                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
</div> -->
<div class="row">
    <div class="col-sm-12">
        <div class="formSearch">
            <div class="row" >
                <div class="col-sm-12">
                     <div class="formSearch-header">
                        <form style="padding: 2rem;padding-left: 7rem;">
                        <div class="row">
                            <div class="col-sm-6">
                            <input type="text" id="searchString" class="form-control " placeholder="ค้นหาประกาศ">
                            </div>
                            <div class="col-sm-4">
                            <select class="form-control" id="seTypeProject">
                                <option value=null>เลือกประเภทงาน</option>
                                @foreach (TypeProject TypeProjectList in TypeProjects) 
                                {
                                    <option value=@TypeProjectList.TypeProject_ID>@TypeProjectList.Name</option>
                                }
                            </select>
                            </div>
                            <div class="col-sm-2 pull-left">
                                <button class="btn btn-default " type="button" id="buttonSearch">
                                    <i class="fas fa-search"></i> ค้นหา
                                </button>
                            </div>
                        </div>
                        </form>
                     </div>
                </div>
            </div>
            <div class="row" >
                <div class="col-sm-12">
                     <div class="formSearch-header" style="border-bottom: 1px solid #BEC0C2;">
                         <table style="width:100%;" id="tableSearch" class="tableSearch">
                            <thead>
                                <tr style="height: 5rem; background-color: #4e4d4d; color:  white;">
                                    <th class="col-xs-5">ชื่อ/รายละอียด</th>
                                    <th class="col-xs-2 text-center">ระยะเวลา</th>
                                    <th class="col-xs-3 text-center">ประมูลถึง</th>
                                    <th class="col-xs-2 text-center">ราคา</th>
                                </tr>
                            </thead>
                            <tbody class="points_table_scrollbar">
                                @foreach (@Project @ProjectLists in @ProjectList) {
                                <tr class="projectComtroller">
                                    <td class="col-xs-5">
                                        <div class="row">
                                            <div class="col-sm-12 projectName">
                                                <a href=/Outsider/ProjectDetails/@ProjectLists.Project_ID>
                                                    <h4><i class="fas fa-archive"></i> @ProjectLists.ProjectName</h4>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12"> @ProjectLists.Description</div>
                                        </div>
                                    </td>
                                    <td class="col-xs-2">
                                        <div class="row">
                                            <div class="col-sm-12 text-center Timelength">@ProjectLists.Timelength วัน</div>
                                        </div>
                                    </td>
                                    <td class="col-xs-2">
                                        <div class="row">
                                            <div class="col-sm-12 text-center EndDate">@Html.DisplayFor(modelItem => @ProjectLists.EndDate)</div>
                                        </div>
                                    </td>
                                    <td class="col-xs-2">
                                        <div class="row">
                                            <div class="col-sm-12 text-center Budget"><i class="fal fa-calendar-alt"></i>@ProjectLists.Budget บาท</div>
                                        </div>

                                    </td>
                                </tr>
                                }
                            </tbody>
                        </table>
                     </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    $(document).ready(function () {
        localStorage.clear();
        $("#dataNull").css("display", "none");
        var searchString = "";
        var typeProject =  0;
        $("#searchString").change(function () {
            searchString = $("#searchString").val();
            console.log(searchString);
            if(searchString == "")
            {
                $("#buttonSearch").prop('disabled', true);
            }else
            {
                 $("#buttonSearch").prop('disabled', false);
            }
        });
        $("#seTypeProject").change(function () {
            typeProject = $("#seTypeProject").val();
            console.log(typeProject);
        });
        $("#buttonSearch").click(function () {
            jQuery.ajax({
                type: "post",
                dataType: "json",
                url: "/Freelnace/SearchString",
                data: {
                    searchString: searchString,
                    typeProject: typeProject
                },
                success: function (data) {
                    console.log(data);
                    $(".projectAPI").css("display", "none");
                    $(".trrowNone").css("display", "none");
                    jQuery.each(data, function (i, data) {
                        $("#tableSearch").find('tbody')
                        var date = new Date(data.endDate);
                        var day = date.getDate();
                        var month = date.getMonth();
                        var year = date.getFullYear();
                        var row1 = $('<tr class="projectAPI"> <td class="col-xs-5"><div class="row"><div class="col-sm-12 projectName">' + '<a href=/Outsider/ProjectDetails/' + data.project_ID + '>' + '<h4>' + '<i class="fas fa-archive"></i> '+ data.projectName + '</h4>' + '</a>' + '</div></div>' +
                            '<div class="row"><div class="col-sm-12">' + data.description + '</div></div>' +
                            '</td><td class="col-xs-2"><div class="row"><div class="col-sm-12 text-center Timelength">' + data.timelength + ' วัน' + '</div></div></td>' +
                            '<td class="col-xs-2"><div class="row"><div class="col-sm-12 text-center EndDate">' + day + '/' + month + '/' + year + '</div></div></td>' +
                            '<td class="col-xs-2"><div class="row"><div class="col-sm-12 text-center Budget">' + data.budget + ' บาท' + '</div></div>');
                        $("#tableSearch").append(row1);
                        $(".projectComtroller").css("display", "none");
                    });
                    if (data.length == 0) {
                        $(".projectComtroller").css("display", "none");
                        $(".trrowNone").css("display", "none");
                        var rowNone = $('<tr class="trrowNone" id="rowNone"><td></td><td class="text-center"><p>-- ไม่พบประกาศ --</p></td></tr>');
                        $("#tableSearch").append(rowNone);
                    }
                    else {
                        $("#rowNone").css("display", "none");
                    }
                },
                error: function (data) {
                    alert("เกิดข้อผิดพลาด");
                },
            });
        });
    });
</script>